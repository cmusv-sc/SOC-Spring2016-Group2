[{"type":"js","data":"(function () {\n\n/* Imports */\nvar Meteor = Package.meteor.Meteor;\nvar global = Package.meteor.global;\nvar meteorEnv = Package.meteor.meteorEnv;\nvar _ = Package.underscore._;\nvar Blaze = Package.blaze.Blaze;\nvar UI = Package.blaze.UI;\nvar Handlebars = Package.blaze.Handlebars;\nvar Tracker = Package.tracker.Tracker;\nvar Deps = Package.tracker.Deps;\nvar HTML = Package.htmljs.HTML;\n\n/* Package-scope variables */\nvar i18n;\n\n(function(){\n\n//////////////////////////////////////////////////////////////////////////////\n//                                                                          //\n// packages/anti_i18n/packages/anti_i18n.js                                 //\n//                                                                          //\n//////////////////////////////////////////////////////////////////////////////\n                                                                            //\n(function () {                                                              // 1\n                                                                            // 2\n///////////////////////////////////////////////////////////////////////     // 3\n//                                                                   //     // 4\n// packages/anti:i18n/i18n.js                                        //     // 5\n//                                                                   //     // 6\n///////////////////////////////////////////////////////////////////////     // 7\n                                                                     //     // 8\n/*                                                                   // 1   // 9\n  just-i18n package for Meteor.js                                    // 2   // 10\n  author: Hubert OG <hubert@orlikarnia.com>                          // 3   // 11\n*/                                                                   // 4   // 12\n                                                                     // 5   // 13\n                                                                     // 6   // 14\nvar maps            = {};                                            // 7   // 15\nvar language        = '';                                            // 8   // 16\nvar defaultLanguage = 'en';                                          // 9   // 17\nvar missingTemplate = '';                                            // 10  // 18\nvar showMissing     = false;                                         // 11  // 19\nvar dep             = new Deps.Dependency();                         // 12  // 20\n                                                                     // 13  // 21\n                                                                     // 14  // 22\n/*                                                                   // 15  // 23\n  Convert key to internationalized version                           // 16  // 24\n*/                                                                   // 17  // 25\ni18n = function() {                                                  // 18  // 26\n  dep.depend();                                                      // 19  // 27\n                                                                     // 20  // 28\n  var label;                                                         // 21  // 29\n  var args = _.toArray(arguments);                                   // 22  // 30\n                                                                     // 23  // 31\n  /* remove extra parameter added by blaze */                        // 24  // 32\n  if(typeof args[args.length-1] === 'object') {                      // 25  // 33\n    args.pop();                                                      // 26  // 34\n  }                                                                  // 27  // 35\n                                                                     // 28  // 36\n  var label = args[0];                                               // 29  // 37\n  args.shift();                                                      // 30  // 38\n                                                                     // 31  // 39\n                                                                     // 32  // 40\n  if(typeof label !== 'string') return '';                           // 33  // 41\n  var str = (maps[language] && maps[language][label]) ||             // 34  // 42\n         (maps[defaultLanguage] && maps[defaultLanguage][label]) ||  // 35  // 43\n         (showMissing && _.template(missingTemplate, {language: language, defaultLanguage: defaultLanguage, label: label})) ||\n         '';                                                         // 37  // 45\n  str = replaceWithParams(str, args)                                 // 38  // 46\n  return str;                                                        // 39  // 47\n};                                                                   // 40  // 48\n                                                                     // 41  // 49\n/*                                                                   // 42  // 50\n  Register handlebars helper                                         // 43  // 51\n*/                                                                   // 44  // 52\nif(Meteor.isClient) {                                                // 45  // 53\n  if(UI) {                                                           // 46  // 54\n    UI.registerHelper('i18n', function () {                          // 47  // 55\n      return i18n.apply(this, arguments);                            // 48  // 56\n    });                                                              // 49  // 57\n  } else if(Handlebars) {                                            // 50  // 58\n    Handlebars.registerHelper('i18n', function () {                  // 51  // 59\n      return i18n.apply(this, arguments);                            // 52  // 60\n    });                                                              // 53  // 61\n  }                                                                  // 54  // 62\n}                                                                    // 55  // 63\n                                                                     // 56  // 64\nfunction replaceWithParams(string, params) {                         // 57  // 65\n  var formatted = string;                                            // 58  // 66\n  params.forEach(function(param , index){                            // 59  // 67\n    var pos = index + 1;                                             // 60  // 68\n    formatted = formatted.replace(\"{$\" + pos + \"}\", param);          // 61  // 69\n  });                                                                // 62  // 70\n                                                                     // 63  // 71\n  return formatted;                                                  // 64  // 72\n};                                                                   // 65  // 73\n                                                                     // 66  // 74\n/*                                                                   // 67  // 75\n  Settings                                                           // 68  // 76\n*/                                                                   // 69  // 77\ni18n.setLanguage = function(lng) {                                   // 70  // 78\n  language = lng;                                                    // 71  // 79\n  dep.changed();                                                     // 72  // 80\n};                                                                   // 73  // 81\n                                                                     // 74  // 82\ni18n.setDefaultLanguage = function(lng) {                            // 75  // 83\n  defaultLanguage = lng;                                             // 76  // 84\n  dep.changed();                                                     // 77  // 85\n};                                                                   // 78  // 86\n                                                                     // 79  // 87\ni18n.getLanguage = function() {                                      // 80  // 88\n  dep.depend();                                                      // 81  // 89\n  return language;                                                   // 82  // 90\n};                                                                   // 83  // 91\n                                                                     // 84  // 92\ni18n.showMissing = function(template) {                              // 85  // 93\n  if(template) {                                                     // 86  // 94\n    if(typeof template === 'string') {                               // 87  // 95\n      missingTemplate = template;                                    // 88  // 96\n    } else {                                                         // 89  // 97\n      missingTemplate = '[<%= label %>]';                            // 90  // 98\n    }                                                                // 91  // 99\n    showMissing = true;                                              // 92  // 100\n  } else {                                                           // 93  // 101\n    missingTemplate = '';                                            // 94  // 102\n    showMissing = false;                                             // 95  // 103\n  }                                                                  // 96  // 104\n};                                                                   // 97  // 105\n                                                                     // 98  // 106\n/*                                                                   // 99  // 107\n  Register map                                                       // 100\n*/                                                                   // 101\ni18n.map = function(language, map) {                                 // 102\n  if(!maps[language]) maps[language] = {};                           // 103\n  registerMap(language, '', false, map);                             // 104\n  dep.changed();                                                     // 105\n};                                                                   // 106\n                                                                     // 107\nvar registerMap = function(language, prefix, dot, map) {             // 108\n  if(typeof map === 'string') {                                      // 109\n    maps[language][prefix] = map;                                    // 110\n  } else if(typeof map === 'object') {                               // 111\n    if(dot) prefix = prefix + '.';                                   // 112\n    _.each(map, function(value, key) {                               // 113\n      registerMap(language, prefix + key, true, value);              // 114\n    });                                                              // 115\n  }                                                                  // 116\n};                                                                   // 117\n                                                                     // 118\n                                                                     // 119\n///////////////////////////////////////////////////////////////////////     // 128\n                                                                            // 129\n}).call(this);                                                              // 130\n                                                                            // 131\n//////////////////////////////////////////////////////////////////////////////\n\n}).call(this);\n\n\n/* Exports */\nif (typeof Package === 'undefined') Package = {};\n(function (pkg, symbols) {\n  for (var s in symbols)\n    (s in pkg) || (pkg[s] = symbols[s]);\n})(Package['anti:i18n'] = {}, {\n  i18n: i18n\n});\n\n})();\n","servePath":"/packages/anti_i18n.js"}]